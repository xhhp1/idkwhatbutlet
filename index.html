<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام الفنيين</title>
<style>
  body {
    font-family: "Tahoma", sans-serif;
    background-color: #1e1e1e;
    color: #fff;
    padding: 30px;
    text-align: center;
  }

  input[type=text] {
    padding: 10px;
    width: 300px;
    font-size: 16px;
    border-radius: 5px;
    border: none;
    margin-right: 10px;
  }

  button {
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    background-color: #8B0000;
    color: #fff;
  }

  /* Modal Styles */
  .modal {
    display: none; 
    position: fixed;
    z-index: 100; 
    left: 0;
    top: 0;
    width: 100%; 
    height: 100%; 
    overflow: auto;
    background-color: rgba(0,0,0,0.8);
  }

  .modal-content {
    background-color: #222;
    margin: 10% auto; 
    padding: 20px;
    border: 1px solid #888;
    width: 80%; 
    border-radius: 10px;
    text-align: right;
  }

  .close {
    color: #aaa;
    float: left;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }

  pre {
    text-align: right;
    white-space: pre-wrap;
    word-wrap: break-word;
    background-color: #111;
    padding: 10px;
    border-radius: 5px;
  }
</style>
</head>
<body>

<h1>نظام الفنيين</h1>
<input type="text" id="fieldCode" placeholder="الكود الخاص بالفني">
<button onclick="searchCode()">بحث</button>

<!-- Modal -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <pre id="modalText"></pre>
  </div>
</div>

<script>
  // Example dataset simulating your Google Sheet
  const data = [
    {
      code: "F001",
      name: "علي",
      copyId: "123456789",
      headerText: "إجازة داخلية",
      duration: 24,
      balance: 120,
      startDate: "2025-10-20",
      endDate: "2025-10-22",
      levelNumber: "متدرب & 1",
      warningLevel: "1",
      fineAmount: "1,000,000",
      violation: "تأخير في العمل",
      reason: "لم يحضر",
      penalty: 5000,
      warning: "نعم",
      notPunished: "لا",
      days: 5
    },
    {
      code: "F002",
      name: "أحمد",
      copyId: "987654321",
      headerText: "إجازة خارجية",
      duration: 48,
      balance: 100,
      startDate: "2025-10-21",
      endDate: "2025-10-25",
      levelNumber: "متدرب & 2",
      warningLevel: "2",
      fineAmount: "500,000",
      violation: "عدم الالتزام",
      reason: "غياب بدون عذر",
      penalty: 3000,
      warning: "لا",
      notPunished: "نعم",
      days: 3
    }
  ];

  function searchCode() {
    const code = document.getElementById("fieldCode").value.trim();
    const person = data.find(p => p.code === code);

    if (!person) {
      alert("⚠️ لم يتم العثور على الكود");
      return;
    }

    let result = `
***\` إجازة داخلية \`***

***\`${person.headerText} :\`***  <@${person.copyId}>

***\`المــــدة :\` ${person.duration} ساعة***  
***\`الرصيد المتبقي :\` ${person.balance - person.duration} ساعة***  
***من تاريخ ${person.startDate}***  
***الى تاريخ ${person.endDate}***  

***\`ملاحظة :\`***
تنتهي اجازتك بنفس التوقيت اللي بترجع فيه.

***\`تنويهات هامة يجب قرائتها :\`***
01/ تبدأ الإجازة الخاصة بك في وقتها المحدد...
02/ يجب العودة من الإجازة قبل انتهاء مدتها...
03/ عند وجود عذر سيتم تصفير الاجازات...
04/ في حال تم سجنك رقابيا سيتم تطبيق العقوبه...
05/ يمنع منعاً باتاً تغيير الاسم داخل المقاطعة...
`;

    document.getElementById("modalText").innerText = result;
    document.getElementById("myModal").style.display = "block";
  }

  function closeModal() {
    document.getElementById("myModal").style.display = "none";
  }

  // Close modal if clicking outside
  window.onclick = function(event) {
    const modal = document.getElementById("myModal");
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>

</body>
</html>

