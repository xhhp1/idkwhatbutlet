<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>مسميات حرس الحدود</title>
  <style>
    :root{
      --bg: #05464C;
      --accent: #e0ca51;
      --text: #ffffff;
      --muted: rgba(255,255,255,0.85);
      --glass: rgba(0,0,0,0.18);
      --radius: 16px;

      --field-bg: #759E9A;
      --field-text: #0b1e1f;
      --field-border: rgba(0,0,0,0.25);

      --focus: #d7c34e;
      --invalid: #ffcdcd;
      --invalid-border: #d44949;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:28px;
      font-family: "Tahoma", sans-serif;
      background:var(--bg); color:var(--text);
      display:flex; align-items:center; justify-content:center;
    }

    .card{
      width:100%; max-width:820px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));
      border-radius:var(--radius); padding:24px;
      box-shadow:0 14px 36px rgba(0,0,0,0.45);
      border:1px solid rgba(255,255,255,0.05);
    }

    h1{ margin:0 0 16px; font-size:22px; color:var(--accent); text-align:center; }

    .row{ display:flex; gap:14px; flex-wrap:wrap; justify-content:flex-end; align-items:flex-end; margin-bottom:14px; }
    .col{ display:flex; flex-direction:column; gap:14px; margin-bottom:14px; }

    label{ font-size:13px; margin-bottom:6px; color:var(--muted); }

    select,input{
      background:var(--field-bg); color:var(--field-text);
      border:1px solid var(--field-border);
      padding:11px 12px; border-radius:12px; font-size:15px;
      outline:none; min-width:140px;
    }

    .ltr{ direction:ltr; text-align:left }
    .grow{ flex:1 1 220px; min-width:180px }

    .switch{ display:flex; align-items:center; gap:8px; cursor:pointer; font-size:13px; }
    .switch input{ display:none; }
    .toggle{
      width:42px; height:24px; border-radius:999px; background:#86b6b1; position:relative; transition:.2s;
    }
    .toggle::after{
      content:""; position:absolute; top:2px; right:2px; width:20px; height:20px;
      background:#fff; border-radius:50%; transition:.2s;
    }
    .switch input:checked + .toggle{ background:#c9d7d5; }
    .switch input:checked + .toggle::after{ right:20px; }

    .slot-fixed{ width:220px; }
    .hidden-keep{ visibility:hidden; pointer-events:none; }

    .preview{
      background:var(--glass);
      border-radius:12px; padding:14px;
      border:1px solid rgba(255,255,255,0.06);
      white-space:nowrap; text-align:right; direction:rtl;
      font-size:18px; font-family:"Tahoma";
    }

    .copy-indicator{
      opacity:0; text-align:center; margin-top:6px;
      color:#f0ffda; font-size:14px; transition:.4s ease;
    }
    .copy-indicator.show{ opacity:1; }

    .actions{ display:flex; justify-content:flex-end; gap:12px; margin-top:12px; }
    .btn{
      background:var(--accent); color:#111;
      padding:11px 16px; border:none; border-radius:12px;
      font-weight:700; cursor:pointer;
    }
    .btn.secondary{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.15); }

    .invalid{ background:var(--invalid)!important; border-color:var(--invalid-border)!important; }
  </style>
</head>
<body>
<div class="card">

<h1>مسميات حرس الحدود</h1>

<!-- الصف الأول -->
<div class="row">
  <div>
    <label>اختر كود قطاعك</label>
    <select id="letter" class="ltr">
      <option value="" disabled selected hidden>— اختر —</option>
      <option>R</option><option>H</option><option>P</option><option>G</option><option>E</option><option>M</option>
    </select>
  </div>

  <div class="grow">
    <label>اكتب رقم كودك</label>
    <input id="number" type="number" class="ltr" placeholder="أدخل رقمك">
  </div>

  <div>
    <label class="switch"><input id="showPrefix" type="checkbox"><span class="toggle"></span>كود المعتمد</label>
  </div>
  <div>
    <label class="switch"><input id="snooze" type="checkbox"><span class="toggle"></span>غفوة</label>
  </div>

  <div id="prefixBlock" class="slot-fixed hidden-keep">
    <label>كود المعتمد</label>
    <select id="prefix" class="ltr">
      <option>CD</option><option>CC</option><option>CB</option><option>CA</option>
    </select>
  </div>
</div>

<!-- التوجيه -->
<div class="col">
  <div class="row" style="margin-bottom:0;">
    <div class="grow">
      <label>اختر توجيهك</label>
      <select id="weapon">
        <option value="" disabled selected hidden>— اختر —</option>
        <option>سلاح</option><option>حـد</option><option>شاهين</option><option>ردع</option><option>شهاب</option>
        <option>سيف</option><option>رمح</option><option>نجم</option><option>حرس</option>
        <option>شرطة عسكرية</option><option>رقيب خفر</option><option>ضابط خف</option><option>سجن</option>
      </select>
    </div>

    <div id="locationBlock" style="display:none;">
      <label>اختر الموقع</label>
      <select id="locationSel">
        <option value="" disabled selected hidden>— اختر —</option>
        <option value="س.ش">ساندي</option>
        <option value="ج.ب">جزيرة بوليتو</option>
      </select>
    </div>

    <div>
      <label class="switch"><input id="joint" type="checkbox"><span class="toggle"></span>مشتركة</label>
    </div>
  </div>

  <div>
    <label>رقم توزيعك</label>
    <input id="customLabel" class="ltr" placeholder="مثال: 1">
  </div>
</div>

<!-- النتيجة -->
<div id="preview" class="preview">| [ ? | ?-___ ] —</div>
<div id="copyNote" class="copy-indicator">✓ تم النسخ</div>

<!-- الأزرار -->
<div class="actions">
  <button class="btn" id="generateBtn">عرض ونسخ</button>
  <button class="btn secondary" id="clearBtn">إعادة ضبط</button>
</div>

</div>

<script>
const prefixEl=document.getElementById("prefix");
const prefixBlock=document.getElementById("prefixBlock");
const showPrefixEl=document.getElementById("showPrefix");
const letterEl=document.getElementById("letter");
const numEl=document.getElementById("number");
const weaponEl=document.getElementById("weapon");
const customEl=document.getElementById("customLabel");
const locationBlock=document.getElementById("locationBlock");
const locationSel=document.getElementById("locationSel");
const snoozeEl=document.getElementById("snooze");
const jointEl=document.getElementById("joint");
const preview=document.getElementById("preview");
const note=document.getElementById("copyNote");
const NEED_LOCATION=new Set(["سيف","رمح","نجم"]);

function showCopyNote(){
  note.classList.add("show");
  setTimeout(()=>note.classList.remove("show"),1200);
}

function pad(n){
  if(n===""||n==null) return "___";
  n=parseInt(n); if(isNaN(n)) return "___";
  return String(n).padStart(3,"0");
}

function syncPrefix(){
  prefixBlock.classList.toggle("hidden-keep",!showPrefixEl.checked);
}

function syncLocation(){
  locationBlock.style.display=NEED_LOCATION.has(weaponEl.value)?"":"none";
  if(!NEED_LOCATION.has(weaponEl.value)) locationSel.value="";
}

function build(){
  const pfx=showPrefixEl.checked?`${prefixEl.value} | `:"";
  const code=`${letterEl.value||"?"}-${pad(numEl.value)}`;
  const w=weaponEl.value||"—";
  const dist=customEl.value?` ${customEl.value}`:"";
  const loc=NEED_LOCATION.has(w)&&locationSel.value?` ${locationSel.value}`:"";
  const joint=jointEl.checked?"م ":"";
  const snooze=snoozeEl.checked?" غفوة":"";
  return `| [ ${pfx}${code} ] ${joint}${w}${dist}${loc}${snooze}`;
}

function update(){ syncPrefix(); syncLocation(); preview.textContent=build(); }

function validate(){
  let ok=true;
  if(!letterEl.value){letterEl.classList.add("invalid"); ok=false;}else letterEl.classList.remove("invalid");
  if(!numEl.value){numEl.classList.add("invalid"); ok=false;}else numEl.classList.remove("invalid");
  if(!weaponEl.value){weaponEl.classList.add("invalid"); ok=false;}else weaponEl.classList.remove("invalid");
  if(NEED_LOCATION.has(weaponEl.value)&&!locationSel.value){locationSel.classList.add("invalid"); ok=false;}else locationSel.classList.remove("invalid");
  return ok;
}

async function copy(){
  navigator.clipboard.writeText(build()).catch(()=>{
    const t=document.createElement("textarea");
    t.value=build(); document.body.appendChild(t); t.select(); document.execCommand("copy"); t.remove();
  });
  showCopyNote();
}

document.querySelectorAll("select,input").forEach(el=>el.addEventListener("input",update));
generateBtn.onclick=()=>{ if(validate()) copy(); };
clearBtn.onclick=()=>{
  letterEl.value=""; numEl.value=""; weaponEl.value="";
  customEl.value=""; locationSel.value=""; snoozeEl.checked=false; jointEl.checked=false;
  showPrefixEl.checked=false; syncPrefix(); update();
};

update();
</script>
</body>
</html>

